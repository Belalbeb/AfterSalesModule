<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <!-- Email Template for Overdue Maintenance Tickets -->
        <record id="email_template_maintenance_ticket_overdue" model="mail.template">
            <field name="name">Maintenance Ticket Overdue Notification</field>
            <field name="model_id" ref="model_maintenance_ticket"/>
            <field name="subject">Maintenance Ticket ${object.name} - Overdue Notification</field>
            <field name="email_from">${(object.create_uid.email_formatted or user.email_formatted)}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">
                    <div style="background-color: #f8f9fa; padding: 20px;">
                        <div style="background-color: #ffffff; border-radius: 4px; padding: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <h2 style="color: #d9534f; margin-top: 0px; border-bottom: 2px solid #d9534f; padding-bottom: 10px;">
                                ⚠️ Maintenance Ticket Overdue Notification
                            </h2>
                            
                            <p style="margin: 16px 0px; font-size: 14px; line-height: 1.6;">
                                This is an automated notification to inform you that a maintenance ticket has been open for 
                                <strong style="color: #d9534f;">more than 14 days</strong> and is not yet in the "Done &amp; Close" stage.
                            </p>
                            
                            <div style="background-color: #f8f9fa; border-left: 4px solid #d9534f; padding: 15px; margin: 20px 0px;">
                                <h3 style="margin-top: 0px; color: #333;">Ticket Information</h3>
                                <table style="width: 100%; border-collapse: collapse;">
                                    <tr>
                                        <td style="padding: 8px; font-weight: bold; width: 40%;">Ticket Number:</td>
                                        <td style="padding: 8px;">${object.name}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px; font-weight: bold;">Description:</td>
                                        <td style="padding: 8px;">${object.description or 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px; font-weight: bold;">Customer:</td>
                                        <td style="padding: 8px;">${object.customer.name if object.customer else 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px; font-weight: bold;">Assigned To:</td>
                                        <td style="padding: 8px;">${object.assigned_to.name if object.assigned_to else 'Unassigned'}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px; font-weight: bold;">Current Stage:</td>
                                        <td style="padding: 8px;">${object.stage_id.name if object.stage_id else 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px; font-weight: bold;">Department:</td>
                                        <td style="padding: 8px;">${dict(object._fields['department'].selection).get(object.department, 'N/A')}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px; font-weight: bold;">Created Date:</td>
                                        <td style="padding: 8px;">${object.create_date.strftime('%Y-%m-%d %H:%M:%S') if object.create_date else 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px; font-weight: bold; color: #d9534f;">Days Open:</td>
                                        <td style="padding: 8px; color: #d9534f; font-weight: bold;">
                                            More than 14 days
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            
                            <p style="margin: 20px 0px; font-size: 14px; line-height: 1.6;">
                                <strong>Action Required:</strong> Please review this ticket and take appropriate action to resolve it or move it to the "Done &amp; Close" stage.
                            </p>
                            
                            <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                                <p style="margin: 0px; font-size: 12px; color: #666;">
                                    This is an automated notification sent by the After Sales Maintenance System.
                                    <br/>
                                    To view the ticket, please access the Maintenance Ticket module in Odoo.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </field>
        </record>
    </data>
</odoo>
